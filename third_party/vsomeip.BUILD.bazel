load(
    "@cmake_configure_file//:cmake_configure_file.bzl",
    "cmake_configure_file",
)
load("@rules_cc//cc:defs.bzl", "cc_library", "cc_shared_library")

cmake_configure_file(
    name = "internal_hpp",
    src = "implementation/configuration/include/internal.hpp.in",
    out = "implementation/configuration/include/internal.hpp",
    defines = [
        "DEFAULT_CONFIGURATION_FILE=/etc/vsomeip.json",
        "DEFAULT_CONFIGURATION_FOLDER=/etc/vsomeip",
        "VSOMEIP_BASE_PATH=/tmp",
        "VSOMEIP_MAJOR_VERSION=3",
        "VSOMEIP_UNICAST_ADDRESS=127.0.0.1",
        "VSOMEIP_LOCAL_TCP_PORT_WAIT_TIME=100",
        "VSOMEIP_LOCAL_TCP_PORT_MAX_WAIT_TIME=10000",
        "VSOMEIP_DIAGNOSIS_ADDRESS=0x01",
        "VSOMEIP_ROUTING_READY_MESSAGE=SOME/IP routing ready.",
    ],
    visibility = ["//visibility:private"],
)

vsomeip3_interface_hdrs = [
    "interface/vsomeip/trace.hpp",
    "interface/vsomeip/handler.hpp",
    "interface/vsomeip/vsomeip_sec.h",
    "interface/vsomeip/deprecated.hpp",
    "interface/vsomeip/runtime.hpp",
    "interface/vsomeip/internal/logger.hpp",
    "interface/vsomeip/internal/deserializable.hpp",
    "interface/vsomeip/internal/plugin_manager.hpp",
    "interface/vsomeip/internal/policy_manager.hpp",
    "interface/vsomeip/internal/serializable.hpp",
    "interface/vsomeip/primitive_types.hpp",
    "interface/vsomeip/message.hpp",
    "interface/vsomeip/export.hpp",
    "interface/vsomeip/payload.hpp",
    "interface/vsomeip/plugin.hpp",
    "interface/vsomeip/message_base.hpp",
    "interface/vsomeip/plugins/application_plugin.hpp",
    "interface/vsomeip/plugins/pre_configuration_plugin.hpp",
    "interface/vsomeip/function_types.hpp",
    "interface/vsomeip/vsomeip.hpp",
    "interface/vsomeip/enumeration_types.hpp",
    "interface/vsomeip/structured_types.hpp",
    "interface/vsomeip/constants.hpp",
    "interface/vsomeip/defines.hpp",
    "interface/vsomeip/error.hpp",
    "interface/vsomeip/application.hpp",
]

vsomeip3_cfg_src = [
    "implementation/configuration/src/configuration_impl.cpp",
    "implementation/configuration/src/configuration_plugin_impl.cpp",
]

vsomeip3_cfg_hdrs = [
    "implementation/configuration/include/routing.hpp",
    "implementation/configuration/include/e2e.hpp",
    "implementation/configuration/include/internal_android.hpp",
    "implementation/configuration/include/event.hpp",
    "implementation/configuration/include/trace.hpp",
    "implementation/configuration/include/client.hpp",
    "implementation/configuration/include/application_configuration.hpp",
    "implementation/configuration/include/configuration_plugin_impl.hpp",
    "implementation/configuration/include/service.hpp",
    "implementation/configuration/include/configuration_plugin.hpp",
    "implementation/configuration/include/configuration_element.hpp",
    "implementation/configuration/include/configuration_impl.hpp",
    "implementation/configuration/include/internal.hpp",
    "implementation/configuration/include/eventgroup.hpp",
    "implementation/configuration/include/local_clients_keepalive.hpp",
    "implementation/configuration/include/configuration.hpp",
    "implementation/configuration/include/debounce_filter_impl.hpp",
    "implementation/configuration/include/service_instance_range.hpp",
    "implementation/configuration/include/watchdog.hpp",
]

vsomeip3_src = [
    "implementation/endpoints/src/abstract_socket_factory.cpp",
    "implementation/endpoints/src/asio_socket_factory.cpp",
    "implementation/endpoints/src/client_endpoint_impl.cpp",
    "implementation/endpoints/src/credentials.cpp",
    "implementation/endpoints/src/endpoint_definition.cpp",
    "implementation/endpoints/src/endpoint_impl.cpp",
    "implementation/endpoints/src/endpoint_manager_base.cpp",
    "implementation/endpoints/src/endpoint_manager_impl.cpp",
    "implementation/endpoints/src/local_client_endpoint_impl.cpp",
    "implementation/endpoints/src/local_tcp_client_endpoint_impl.cpp",
    "implementation/endpoints/src/local_tcp_server_endpoint_impl.cpp",
    "implementation/endpoints/src/local_uds_client_endpoint_impl.cpp",
    "implementation/endpoints/src/local_uds_server_endpoint_impl.cpp",
    "implementation/endpoints/src/netlink_connector.cpp",
    "implementation/endpoints/src/server_endpoint_impl.cpp",
    "implementation/endpoints/src/tcp_client_endpoint_impl.cpp",
    "implementation/endpoints/src/tcp_server_endpoint_impl.cpp",
    "implementation/endpoints/src/timer.cpp",
    "implementation/endpoints/src/tp.cpp",
    "implementation/endpoints/src/tp_message.cpp",
    "implementation/endpoints/src/tp_reassembler.cpp",
    "implementation/endpoints/src/udp_client_endpoint_impl.cpp",
    "implementation/endpoints/src/udp_server_endpoint_impl.cpp",
    "implementation/endpoints/src/virtual_server_endpoint_impl.cpp",
    "implementation/logger/src/logger_impl.cpp",
    "implementation/logger/src/message.cpp",
    "implementation/tracing/src/channel_impl.cpp",
    "implementation/tracing/src/connector_impl.cpp",
    "implementation/tracing/src/header.cpp",
    "implementation/message/src/deserializer.cpp",
    "implementation/message/src/message_base_impl.cpp",
    "implementation/message/src/message_header_impl.cpp",
    "implementation/message/src/message_impl.cpp",
    "implementation/message/src/payload_impl.cpp",
    "implementation/message/src/serializer.cpp",
    "implementation/plugin/src/plugin_manager.cpp",
    "implementation/plugin/src/plugin_manager_impl.cpp",
    "implementation/protocol/src/assign_client_ack_command.cpp",
    "implementation/protocol/src/assign_client_command.cpp",
    "implementation/protocol/src/command.cpp",
    "implementation/protocol/src/config_command.cpp",
    "implementation/protocol/src/deregister_application_command.cpp",
    "implementation/protocol/src/distribute_security_policies_command.cpp",
    "implementation/protocol/src/dummy_command.cpp",
    "implementation/protocol/src/expire_command.cpp",
    "implementation/protocol/src/multiple_services_command_base.cpp",
    "implementation/protocol/src/offered_services_request_command.cpp",
    "implementation/protocol/src/offered_services_response_command.cpp",
    "implementation/protocol/src/offer_service_command.cpp",
    "implementation/protocol/src/ping_command.cpp",
    "implementation/protocol/src/pong_command.cpp",
    "implementation/protocol/src/register_application_command.cpp",
    "implementation/protocol/src/registered_ack_command.cpp",
    "implementation/protocol/src/register_event.cpp",
    "implementation/protocol/src/register_events_command.cpp",
    "implementation/protocol/src/release_service_command.cpp",
    "implementation/protocol/src/remove_security_policy_command.cpp",
    "implementation/protocol/src/remove_security_policy_response_command.cpp",
    "implementation/protocol/src/request_service_command.cpp",
    "implementation/protocol/src/resend_provided_events_command.cpp",
    "implementation/protocol/src/routing_info_command.cpp",
    "implementation/protocol/src/routing_info_entry.cpp",
    "implementation/protocol/src/security_policy_response_command_base.cpp",
    "implementation/protocol/src/send_command.cpp",
    "implementation/protocol/src/service_command_base.cpp",
    "implementation/protocol/src/simple_command.cpp",
    "implementation/protocol/src/stop_offer_service_command.cpp",
    "implementation/protocol/src/subscribe_ack_command_base.cpp",
    "implementation/protocol/src/subscribe_ack_command.cpp",
    "implementation/protocol/src/subscribe_command_base.cpp",
    "implementation/protocol/src/subscribe_command.cpp",
    "implementation/protocol/src/subscribe_nack_command.cpp",
    "implementation/protocol/src/suspend_command.cpp",
    "implementation/protocol/src/unregister_event_command.cpp",
    "implementation/protocol/src/unsubscribe_ack_command.cpp",
    "implementation/protocol/src/unsubscribe_command.cpp",
    "implementation/protocol/src/update_security_credentials_command.cpp",
    "implementation/protocol/src/update_security_policy_command.cpp",
    "implementation/protocol/src/update_security_policy_response_command.cpp",
    "implementation/routing/src/event.cpp",
    "implementation/routing/src/eventgroupinfo.cpp",
    "implementation/routing/src/remote_subscription.cpp",
    "implementation/routing/src/routing_manager_base.cpp",
    "implementation/routing/src/routing_manager_client.cpp",
    "implementation/routing/src/routing_manager_impl.cpp",
    "implementation/routing/src/routing_manager_stub.cpp",
    "implementation/routing/src/serviceinfo.cpp",
    "implementation/runtime/src/application_impl.cpp",
    "implementation/runtime/src/runtime.cpp",
    "implementation/runtime/src/runtime_impl.cpp",
    "implementation/security/src/policy.cpp",
    "implementation/security/src/policy_manager_impl.cpp",
    "implementation/security/src/security.cpp",
    "implementation/utility/src/criticalsection.cpp",
    "implementation/utility/src/utility.cpp",
    "implementation/utility/src/wrappers.cpp",
]

vsomeip3_sd_src = [
    "implementation/service_discovery/src/configuration_option_impl.cpp",
    "implementation/service_discovery/src/deserializer.cpp",
    "implementation/service_discovery/src/entry_impl.cpp",
    "implementation/service_discovery/src/eventgroupentry_impl.cpp",
    "implementation/service_discovery/src/ip_option_impl.cpp",
    "implementation/service_discovery/src/ipv4_option_impl.cpp",
    "implementation/service_discovery/src/ipv6_option_impl.cpp",
    "implementation/service_discovery/src/load_balancing_option_impl.cpp",
    "implementation/service_discovery/src/message_element_impl.cpp",
    "implementation/service_discovery/src/message_impl.cpp",
    "implementation/service_discovery/src/option_impl.cpp",
    "implementation/service_discovery/src/protection_option_impl.cpp",
    "implementation/service_discovery/src/remote_subscription_ack.cpp",
    "implementation/service_discovery/src/request.cpp",
    "implementation/service_discovery/src/runtime_impl.cpp",
    "implementation/service_discovery/src/selective_option_impl.cpp",
    "implementation/service_discovery/src/service_discovery_impl.cpp",
    "implementation/service_discovery/src/serviceentry_impl.cpp",
    "implementation/service_discovery/src/subscription.cpp",
    "implementation/service_discovery/src/unknown_option_impl.cpp",
]

vsomeip3_e2e_src = [
    "implementation/e2e_protection/src/buffer/buffer.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile05/checker.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile05/protector.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile05/profile_05.cpp",
    "implementation/e2e_protection/src/e2e/profile/e2e_provider_impl.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile_custom/checker.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile_custom/protector.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile_custom/profile_custom.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile07/checker.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile07/profile_07.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile07/protector.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile04/profile_04.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile04/checker.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile04/protector.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile01/profile_01.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile01/checker.cpp",
    "implementation/e2e_protection/src/e2e/profile/profile01/protector.cpp",
    "implementation/e2e_protection/src/e2exf/config.cpp",
    "implementation/e2e_protection/src/crc/crc.cpp",
]

vsomeip3_internal_hdrs = [
    "implementation/configuration/include/routing.hpp",
    "implementation/configuration/include/e2e.hpp",
    "implementation/configuration/include/event.hpp",
    "implementation/configuration/include/trace.hpp",
    "implementation/configuration/include/client.hpp",
    "implementation/configuration/include/application_configuration.hpp",
    "implementation/configuration/include/configuration_plugin_impl.hpp",
    "implementation/configuration/include/service.hpp",
    "implementation/configuration/include/configuration_plugin.hpp",
    "implementation/configuration/include/configuration_element.hpp",
    "implementation/configuration/include/configuration_impl.hpp",
    "implementation/configuration/include/eventgroup.hpp",
    "implementation/configuration/include/local_clients_keepalive.hpp",
    "implementation/configuration/include/configuration.hpp",
    "implementation/configuration/include/debounce_filter_impl.hpp",
    "implementation/configuration/include/service_instance_range.hpp",
    "implementation/configuration/include/watchdog.hpp",
    "implementation/e2e_protection/include/buffer/buffer.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile05/checker.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile05/profile_05.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile05/protector.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile_custom/checker.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile_custom/profile_custom.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile_custom/protector.hpp",
    "implementation/e2e_protection/include/e2e/profile/e2e_provider_impl.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile_interface/profile_interface.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile_interface/checker.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile_interface/protector.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile07/checker.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile07/profile_07.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile07/protector.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile04/checker.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile04/profile_04.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile04/protector.hpp",
    "implementation/e2e_protection/include/e2e/profile/e2e_provider.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile01/checker.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile01/profile_01.hpp",
    "implementation/e2e_protection/include/e2e/profile/profile01/protector.hpp",
    "implementation/e2e_protection/include/e2exf/config.hpp",
    "implementation/e2e_protection/include/crc/crc.hpp",
    "implementation/endpoints/include/tp.hpp",
    "implementation/endpoints/include/endpoint_manager_base.hpp",
    "implementation/endpoints/include/abstract_timer.hpp",
    "implementation/endpoints/include/abstract_netlink_connector.hpp",
    "implementation/endpoints/include/asio_tcp_socket.hpp",
    "implementation/endpoints/include/endpoint_definition.hpp",
    "implementation/endpoints/include/buffer.hpp",
    "implementation/endpoints/include/client_endpoint_impl.hpp",
    "implementation/endpoints/include/udp_server_endpoint_impl.hpp",
    "implementation/endpoints/include/server_endpoint.hpp",
    "implementation/endpoints/include/asio_timer.hpp",
    "implementation/endpoints/include/tcp_client_endpoint_impl.hpp",
    "implementation/endpoints/include/endpoint.hpp",
    "implementation/endpoints/include/tcp_socket.hpp",
    "implementation/endpoints/include/abstract_socket_factory.hpp",
    "implementation/endpoints/include/timer.hpp",
    "implementation/endpoints/include/endpoint_impl.hpp",
    "implementation/endpoints/include/asio_socket_factory.hpp",
    "implementation/endpoints/include/udp_client_endpoint_impl.hpp",
    "implementation/endpoints/include/local_server_endpoint_impl_receive_op.hpp",
    "implementation/endpoints/include/local_tcp_server_endpoint_impl.hpp",
    "implementation/endpoints/include/udp_server_endpoint_impl_receive_op.hpp",
    "implementation/endpoints/include/tcp_server_endpoint_impl.hpp",
    "implementation/endpoints/include/virtual_server_endpoint_impl.hpp",
    "implementation/endpoints/include/local_tcp_client_endpoint_impl.hpp",
    "implementation/endpoints/include/tp_reassembler.hpp",
    "implementation/endpoints/include/endpoint_manager_impl.hpp",
    "implementation/endpoints/include/local_client_endpoint_impl.hpp",
    "implementation/endpoints/include/io_control_operation.hpp",
    "implementation/endpoints/include/netlink_connector.hpp",
    "implementation/endpoints/include/client_endpoint.hpp",
    "implementation/endpoints/include/local_uds_server_endpoint_impl.hpp",
    "implementation/endpoints/include/server_endpoint_impl.hpp",
    "implementation/endpoints/include/credentials.hpp",
    "implementation/endpoints/include/tp_message.hpp",
    "implementation/endpoints/include/endpoint_host.hpp",
    "implementation/endpoints/include/local_uds_client_endpoint_impl.hpp",
    "implementation/logger/include/logger_impl.hpp",
    "implementation/message/include/payload_impl.hpp",
    "implementation/message/include/message_base_impl.hpp",
    "implementation/message/include/deserializer.hpp",
    "implementation/message/include/message_header_impl.hpp",
    "implementation/message/include/message_impl.hpp",
    "implementation/message/include/serializer.hpp",
    "implementation/plugin/include/plugin_manager_impl.hpp",
    "implementation/protocol/include/pong_command.hpp",
    "implementation/protocol/include/update_security_policy_command.hpp",
    "implementation/protocol/include/ping_command.hpp",
    "implementation/protocol/include/distribute_security_policies_command.hpp",
    "implementation/protocol/include/suspend_command.hpp",
    "implementation/protocol/include/multiple_services_command_base.hpp",
    "implementation/protocol/include/routing_info_entry.hpp",
    "implementation/protocol/include/offered_services_request_command.hpp",
    "implementation/protocol/include/command.hpp",
    "implementation/protocol/include/service_command_base.hpp",
    "implementation/protocol/include/unsubscribe_ack_command.hpp",
    "implementation/protocol/include/config_command.hpp",
    "implementation/protocol/include/stop_offer_service_command.hpp",
    "implementation/protocol/include/release_service_command.hpp",
    "implementation/protocol/include/registered_ack_command.hpp",
    "implementation/protocol/include/send_command.hpp",
    "implementation/protocol/include/remove_security_policy_command.hpp",
    "implementation/protocol/include/offered_services_response_command.hpp",
    "implementation/protocol/include/register_events_command.hpp",
    "implementation/protocol/include/register_application_command.hpp",
    "implementation/protocol/include/update_security_policy_response_command.hpp",
    "implementation/protocol/include/unsubscribe_command.hpp",
    "implementation/protocol/include/expire_command.hpp",
    "implementation/protocol/include/security_policy_response_command_base.hpp",
    "implementation/protocol/include/register_event.hpp",
    "implementation/protocol/include/remove_security_policy_response_command.hpp",
    "implementation/protocol/include/subscribe_command.hpp",
    "implementation/protocol/include/subscribe_ack_command_base.hpp",
    "implementation/protocol/include/unregister_event_command.hpp",
    "implementation/protocol/include/resend_provided_events_command.hpp",
    "implementation/protocol/include/assign_client_command.hpp",
    "implementation/protocol/include/update_security_credentials_command.hpp",
    "implementation/protocol/include/deregister_application_command.hpp",
    "implementation/protocol/include/dummy_command.hpp",
    "implementation/protocol/include/offer_service_command.hpp",
    "implementation/protocol/include/subscribe_command_base.hpp",
    "implementation/protocol/include/routing_info_command.hpp",
    "implementation/protocol/include/simple_command.hpp",
    "implementation/protocol/include/subscribe_ack_command.hpp",
    "implementation/protocol/include/assign_client_ack_command.hpp",
    "implementation/protocol/include/protocol.hpp",
    "implementation/protocol/include/subscribe_nack_command.hpp",
    "implementation/protocol/include/request_service_command.hpp",
    "implementation/routing/include/routing_manager_adapter.hpp",
    "implementation/routing/include/types.hpp",
    "implementation/routing/include/routing_manager_impl.hpp",
    "implementation/routing/include/routing_manager.hpp",
    "implementation/routing/include/event.hpp",
    "implementation/routing/include/serviceinfo.hpp",
    "implementation/routing/include/routing_host.hpp",
    "implementation/routing/include/routing_manager_stub.hpp",
    "implementation/routing/include/routing_manager_base.hpp",
    "implementation/routing/include/routing_manager_stub_host.hpp",
    "implementation/routing/include/routing_manager_host.hpp",
    "implementation/routing/include/eventgroupinfo.hpp",
    "implementation/routing/include/remote_subscription.hpp",
    "implementation/routing/include/function_types.hpp",
    "implementation/routing/include/routing_manager_client.hpp",
    "implementation/runtime/include/runtime_impl.hpp",
    "implementation/runtime/include/application_impl.hpp",
    "implementation/security/include/policy_manager_impl.hpp",
    "implementation/security/include/security.hpp",
    "implementation/security/include/policy.hpp",
    "implementation/service_discovery/include/service_discovery_host.hpp",
    "implementation/service_discovery/include/entry_impl.hpp",
    "implementation/service_discovery/include/ip_option_impl.hpp",
    "implementation/service_discovery/include/serviceentry_impl.hpp",
    "implementation/service_discovery/include/protection_option_impl.hpp",
    "implementation/service_discovery/include/ipv6_option_impl.hpp",
    "implementation/service_discovery/include/load_balancing_option_impl.hpp",
    "implementation/service_discovery/include/selective_option_impl.hpp",
    "implementation/service_discovery/include/service_discovery.hpp",
    "implementation/service_discovery/include/ipv4_option_impl.hpp",
    "implementation/service_discovery/include/deserializer.hpp",
    "implementation/service_discovery/include/unknown_option_impl.hpp",
    "implementation/service_discovery/include/message_element_impl.hpp",
    "implementation/service_discovery/include/runtime.hpp",
    "implementation/service_discovery/include/primitive_types.hpp",
    "implementation/service_discovery/include/message_impl.hpp",
    "implementation/service_discovery/include/option_impl.hpp",
    "implementation/service_discovery/include/runtime_impl.hpp",
    "implementation/service_discovery/include/remote_subscription_ack.hpp",
    "implementation/service_discovery/include/enumeration_types.hpp",
    "implementation/service_discovery/include/subscription.hpp",
    "implementation/service_discovery/include/request.hpp",
    "implementation/service_discovery/include/eventgroupentry_impl.hpp",
    "implementation/service_discovery/include/configuration_option_impl.hpp",
    "implementation/service_discovery/include/service_discovery_impl.hpp",
    "implementation/service_discovery/include/constants.hpp",
    "implementation/service_discovery/include/defines.hpp",
    "implementation/tracing/include/header.hpp",
    "implementation/tracing/include/enumeration_types.hpp",
    "implementation/tracing/include/connector_impl.hpp",
    "implementation/tracing/include/channel_impl.hpp",
    "implementation/tracing/include/defines.hpp",
    "implementation/utility/include/bithelper.hpp",
    "implementation/utility/include/byteorder.hpp",
    "implementation/utility/include/utility.hpp",
    "implementation/utility/include/service_instance_map.hpp",
    "implementation/utility/include/criticalsection.hpp",
    "implementation/utility/include/is_value.hpp",
]

cc_library(
    name = "configured_internal_hdrs",
    hdrs = [":internal_hpp"],
    includes = ["implementation/configuration/include"],
    visibility = ["//visibility:public"],
)

cc_library(
    name = "vsomeip3_internal_hdrs",
    hdrs = vsomeip3_internal_hdrs,
    includes = [
        "implementation/configuration/src",
        "implementation/e2e_protection/src",
        "implementation/endpoints/src",
        "implementation/logger/src",
        "implementation/message/src",
        "implementation/plugin/src",
        "implementation/protocol/src",
        "implementation/routing/src",
        "implementation/runtime/src",
        "implementation/security/src",
        "implementation/service_discovery/src",
        "implementation/tracing/src",
        "implementation/utility/src",
    ],
    deps = [":configured_internal_hdrs"],
)

cc_library(
    name = "vsomeip3_interface",
    hdrs = vsomeip3_interface_hdrs,
    includes = ["interface"],
    visibility = ["//visibility:public"],
)

cc_library(
    name = "vsomeip3_cfg_lib",
    srcs = vsomeip3_cfg_src,
    includes = ["implementation/configuration/src"],
    linkstatic = False,
    deps = [
        ":vsomeip3_interface",
        ":vsomeip3_internal_hdrs",
        "@boost//:headers",
        "@boost//:filesystem",
    ],
)

cc_library(
    name = "vsomeip3_lib",
    srcs = vsomeip3_src,
    linkopts = [
        "-ldl",
        "-lrt",
        "-Wl,-wrap,socket",
        "-Wl,-wrap,accept",
        "-Wl,-wrap,open",
        "-Wl,-wrap,close",
        "-Wl,-wrap,recvfrom",
        "-Wl,-wrap,recvmsg",
        "-Wl,-wrap,sendto",
        "-Wl,-wrap,sendmsg",
        "-Wl,-wrap,epoll_wait",
    ],
    linkstatic = False,
    local_defines = ["WITHOUT_SYSTEMD"],
    deps = [
        ":vsomeip3_interface",
        ":vsomeip3_internal_hdrs",
        "@boost//:headers",
        "@boost//:thread",
    ],
)

cc_library(
    name = "vsomeip3_sd_lib",
    srcs = vsomeip3_sd_src,
    linkstatic = False,
    deps = [
        ":vsomeip3_interface",
        ":vsomeip3_internal_hdrs",
        "@boost//:headers",
    ],
)

cc_library(
    name = "vsomeip3_e2e_lib",
    srcs = vsomeip3_e2e_src,
    linkstatic = False,
    deps = [
        ":vsomeip3_interface",
        ":vsomeip3_internal_hdrs",
    ],
)

filegroup(
    name = "exportmap_gcc",
    srcs = ["exportmap.gcc"],
    visibility = ["//visibility:public"],
)

cc_shared_library(
    name = "vsomeip3",
    additional_linker_inputs = [
        ":exportmap_gcc",
    ],
    user_link_flags = [
        "-Wl,-export-dynamic",
        "-Wl,--version-script=$(location :exportmap_gcc)",
    ],
    shared_lib_name = "libvsomeip3.so.3",
    visibility = ["//visibility:public"],
    deps = [
        ":vsomeip3_lib",
    ],
)

cc_shared_library(
    name = "vsomeip3-e2e",
    additional_linker_inputs = [
        ":exportmap_gcc",
    ],
    shared_lib_name = "libvsomeip3-e2e.so.3",
    user_link_flags = [
        "-Wl,-export-dynamic",
        "-Wl,--version-script=$(location :exportmap_gcc)",
    ],
    visibility = ["//visibility:public"],
    deps = [
        ":vsomeip3_e2e_lib",
    ],
)

cc_shared_library(
    name = "vsomeip3-cfg",
    additional_linker_inputs = [
        ":exportmap_gcc",
    ],
    shared_lib_name = "libvsomeip3-cfg.so.3",
    user_link_flags = [
        "-Wl,-export-dynamic",
        "-Wl,--version-script=$(location :exportmap_gcc)",
    ],
    visibility = ["//visibility:public"],
    deps = [
        ":vsomeip3_cfg_lib",
    ],
)

cc_shared_library(
    name = "vsomeip3-sd",
    additional_linker_inputs = [
        ":exportmap_gcc",
    ],
    shared_lib_name = "libvsomeip3-sd.so.3",
    user_link_flags = [
        "-Wl,-export-dynamic",
        "-Wl,--version-script=$(location :exportmap_gcc)",
    ],
    visibility = ["//visibility:public"],
    deps = [
        ":vsomeip3_sd_lib",
    ],
)
